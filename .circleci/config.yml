version: 2.1 # use CircleCI 2.1
jobs: # a collection of steps
  build: # runs not using Workflows must have a `build` job as entry point
    docker: # run the steps with Docker
      - image: circleci/node:10.17.0
    steps: # a collection of executable commands
      - checkout # special step to check out source code to working directory
      - run:
          name: install-npm-wee
          command: npm install
      - run:
          name: Install JUnit coverage reporter
          command: npm i jest-junit -D
      - run:
          name: Run tests with JUnit as reporter
          command: test_CI
          environment:
          JEST_JUNIT_OUTPUT_DIR: "reports/junit/js-test-results.xml"
